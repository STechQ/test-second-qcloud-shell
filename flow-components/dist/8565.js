"use strict";exports.id=8565,exports.ids=[8565],exports.modules={8565:(e,t,n)=>{n.r(t),n.d(t,{$Command:()=>Oe,AssumeRoleCommand:()=>No,AssumeRoleResponseFilterSensitiveLog:()=>hr,AssumeRoleWithSAMLCommand:()=>Do,AssumeRoleWithSAMLRequestFilterSensitiveLog:()=>pr,AssumeRoleWithSAMLResponseFilterSensitiveLog:()=>fr,AssumeRoleWithWebIdentityCommand:()=>Lo,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>mr,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>yr,CredentialsFilterSensitiveLog:()=>dr,DecodeAuthorizationMessageCommand:()=>_o,ExpiredTokenException:()=>rr,GetAccessKeyInfoCommand:()=>jo,GetCallerIdentityCommand:()=>Fo,GetFederationTokenCommand:()=>qo,GetFederationTokenResponseFilterSensitiveLog:()=>gr,GetSessionTokenCommand:()=>zo,GetSessionTokenResponseFilterSensitiveLog:()=>wr,IDPCommunicationErrorException:()=>lr,IDPRejectedClaimException:()=>ar,InvalidAuthorizationMessageException:()=>ur,InvalidIdentityTokenException:()=>cr,MalformedPolicyDocumentException:()=>sr,PackedPolicyTooLargeException:()=>or,RegionDisabledException:()=>ir,STS:()=>Wo,STSClient:()=>tr,STSServiceException:()=>nr,__Client:()=>ce,decorateDefaultCredentialProvider:()=>Zo,getDefaultRoleAssumer:()=>Ko,getDefaultRoleAssumerWithWebIdentity:()=>Jo});var r=n(6806),s=n(8460),o=n(4647),i=n(3631);const a=(e,t,n)=>{if(t in e){if("true"===e[t])return!0;if("false"===e[t])return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var c;!function(e){e.ENV="env",e.CONFIG="shared config entry"}(c||(c={}));const l={environmentVariableSelector:e=>a(e,"AWS_USE_DUALSTACK_ENDPOINT",c.ENV),configFileSelector:e=>a(e,"use_dualstack_endpoint",c.CONFIG),default:!1},u={environmentVariableSelector:e=>a(e,"AWS_USE_FIPS_ENDPOINT",c.ENV),configFileSelector:e=>a(e,"use_fips_endpoint",c.CONFIG),default:!1};var d=n(4606);const h=e=>e[d.zK]||(e[d.zK]={}),p=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t},f={environmentVariableSelector:e=>e.AWS_REGION,configFileSelector:e=>e.region,default:()=>{throw new Error("Region is missing")}},m={preferredFile:"credentials"},y=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),g=e=>y(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,w=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,S=/(\d+\.){3}\d+/,b=/\.\./,E=(e,t,n)=>{const r=async()=>{const r=n[e]??n[t];return"function"==typeof r?r():r};return"credentialScope"===e||"CredentialScope"===t?async()=>{const e="function"==typeof n.credentials?await n.credentials():n.credentials;return e?.credentialScope??e?.CredentialScope}:"accountId"===e||"AccountId"===t?async()=>{const e="function"==typeof n.credentials?await n.credentials():n.credentials;return e?.accountId??e?.AccountId}:"endpoint"===e||"endpoint"===t?async()=>{const e=await r();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:n,port:r,path:s}=e;return`${t}//${n}${r?":"+r:""}${s}`}}return e}:r};var v=n(4310),A=n(8354);const R="AWS_ENDPOINT_URL",T="endpoint_url";var C=n(1802);const I=e=>"object"==typeof e?"url"in e?(0,C.e)(e.url):e:(0,C.e)(e),P={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},$={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function x(e,t,n){return{applyToStack:r=>{r.add(((e,t)=>n=>async r=>{const{response:s}=await n(r);try{return{response:s,output:await t(s,e)}}catch(e){if(Object.defineProperty(e,"$response",{value:s}),!("$metadata"in e)){const t="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";e.message+="\n  "+t,void 0!==e.$responseBodyText&&e.$response&&(e.$response.body=e.$responseBodyText)}throw e}})(e,n),P),r.add(((e,t)=>(n,r)=>async s=>{const o=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const i=await t(s.input,{...e,endpoint:o});return n({...s,request:i})})(e,t),$)}}}const k={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:$.name},O=(e,t)=>({applyToStack:n=>{n.addRelativeTo((({config:e,instructions:t})=>(n,r)=>async s=>{const o=await(async(e,t,n,r)=>{if(!n.endpoint){const e=await(async e=>(0,v.M)((e=>({environmentVariableSelector:t=>{const n=e.split(" ").map((e=>e.toUpperCase()));return t[[R,...n].join("_")]||t[R]||void 0},configFileSelector:(t,n)=>{if(n&&t.services){const r=n[["services",t.services].join(A.Ck)];if(r){const t=e.split(" ").map((e=>e.toLowerCase())),n=r[[t.join("_"),T].join(A.Ck)];if(n)return n}}const r=t[T];if(r)return r},default:void 0}))(e))())(n.serviceId||"");e&&(n.endpoint=()=>Promise.resolve(I(e)))}const s=await(async(e,t,n)=>{const r={},s=t?.getEndpointParameterInstructions?.()||{};for(const[t,o]of Object.entries(s))switch(o.type){case"staticContextParams":r[t]=o.value;break;case"contextParams":r[t]=e[o.name];break;case"clientContextParams":case"builtInParams":r[t]=await E(o.name,t,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return 0===Object.keys(s).length&&Object.assign(r,n),"s3"===String(n.serviceId).toLowerCase()&&await(async e=>{const t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(e=>{const[t,n,r,,,s]=e.split(":"),o="arn"===t&&e.split(":").length>=6,i=Boolean(o&&n&&r&&s);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i})(t)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else n=t,(!w.test(n)||S.test(n)||b.test(n)||-1!==t.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);var n;return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e})(r),r})(e,t,n);if("function"!=typeof n.endpointProvider)throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)})(s.input,{getEndpointParameterInstructions:()=>t},{...e},r);r.endpointV2=o,r.authSchemes=o.properties?.authSchemes;const i=r.authSchemes?.[0];if(i){r.signing_region=i.signingRegion,r.signing_service=i.signingName;const e=h(r),t=e?.selectedHttpAuthScheme?.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return n({...s})})({config:e,instructions:t}),k)}}),M={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:k.name},N=e=>{let t=e.httpHandler;return{setHttpHandler(e){t=e},httpHandler:()=>t,updateHttpClientConfig(e,n){t.updateHttpClientConfig(e,n)},httpHandlerConfigs:()=>t.httpHandlerConfigs()}};class D{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new D({...e,headers:{...e.headers}});var n;return t.query&&(t.query=(n=t.query,Object.keys(n).reduce(((e,t)=>{const r=n[t];return{...e,[t]:Array.isArray(r)?[...r]:r}}),{}))),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){return D.clone(this)}}class L{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}const _=e=>e=>{throw e},j=(e,t)=>{};var F,q;(q=F||(F={})).STANDARD="standard",q.ADAPTIVE="adaptive";const z=F.STANDARD,U=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],W=["TimeoutError","RequestTimeout","RequestTimeoutException"],H=[500,502,503,504],B=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],G=e=>429===e.$metadata?.httpStatusCode||U.includes(e.name)||1==e.$retryable?.throttling,V=e=>(e=>e.$metadata?.clockSkewCorrected)(e)||W.includes(e.name)||B.includes(e?.code||"")||H.includes(e.$metadata?.httpStatusCode||0);class K{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise((e=>setTimeout(e,t)))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=e);const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),G(e)){const e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){const e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}const J=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>n});class Z{constructor(e){this.maxAttempts=e,this.mode=F.STANDARD,this.capacity=500,this.retryBackoffStrategy=(()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(2e4,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}})(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return J({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){const n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n)){const n=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===n?500:100);const r=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),s=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,r):r,o=this.getCapacityCost(n);return this.capacity-=o,J({retryDelay:s,retryCount:e.getRetryCount()+1,retryCost:o})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn("Max attempts provider could not resolve. Using default of 3"),3}}shouldRetry(e,t,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?10:5}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class Y{constructor(e,t){this.maxAttemptsProvider=e,this.mode=F.ADAPTIVE;const{rateLimiter:n}=t??{};this.rateLimiter=n??new K,this.standardRetryStrategy=new Z(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const X="AWS_MAX_ATTEMPTS",Q="max_attempts",ee={environmentVariableSelector:e=>{const t=e[X];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${X} mast be a number, got "${t}"`);return n},configFileSelector:e=>{const t=e[Q];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${Q} mast be a number, got "${t}"`);return n},default:3},te={environmentVariableSelector:e=>e.AWS_RETRY_MODE,configFileSelector:e=>e.retry_mode,default:z};class ne{trace(){}debug(){}info(){}warn(){}error(){}}const re=(e,t)=>{const n=[];if(e&&n.push(e),t)for(const e of t)n.push(e);return n},se=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,oe=()=>{let e=[],t=[],n=!1;const r=new Set,s=n=>(e.forEach((e=>{n.add(e.middleware,{...e})})),t.forEach((e=>{n.addRelativeTo(e.middleware,{...e})})),n.identifyOnResolve?.(a.identifyOnResolve()),n),o=e=>{const t=[];return e.before.forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...o(e))})),t.push(e),e.after.reverse().forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...o(e))})),t},i=(n=!1)=>{const r=[],s=[],i={};e.forEach((e=>{const t={...e,before:[],after:[]};for(const e of re(t.name,t.aliases))i[e]=t;r.push(t)})),t.forEach((e=>{const t={...e,before:[],after:[]};for(const e of re(t.name,t.aliases))i[e]=t;s.push(t)})),s.forEach((e=>{if(e.toMiddleware){const t=i[e.toMiddleware];if(void 0===t){if(n)return;throw new Error(`${e.toMiddleware} is not found when adding ${se(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}));const a=(c=r,c.sort(((e,t)=>ie[t.step]-ie[e.step]||ae[t.priority||"normal"]-ae[e.priority||"normal"]))).map(o).reduce(((e,t)=>(e.push(...t),e)),[]);var c;return a},a={add:(t,n={})=>{const{name:s,override:o,aliases:i}=n,a={step:"initialize",priority:"normal",middleware:t,...n},c=re(s,i);if(c.length>0){if(c.some((e=>r.has(e)))){if(!o)throw new Error(`Duplicate middleware name '${se(s,i)}'`);for(const t of c){const n=e.findIndex((e=>e.name===t||e.aliases?.some((e=>e===t))));if(-1===n)continue;const r=e[n];if(r.step!==a.step||a.priority!==r.priority)throw new Error(`"${se(r.name,r.aliases)}" middleware with ${r.priority} priority in ${r.step} step cannot be overridden by "${se(s,i)}" middleware with ${a.priority} priority in ${a.step} step.`);e.splice(n,1)}}for(const e of c)r.add(e)}e.push(a)},addRelativeTo:(e,n)=>{const{name:s,override:o,aliases:i}=n,a={middleware:e,...n},c=re(s,i);if(c.length>0){if(c.some((e=>r.has(e)))){if(!o)throw new Error(`Duplicate middleware name '${se(s,i)}'`);for(const e of c){const n=t.findIndex((t=>t.name===e||t.aliases?.some((t=>t===e))));if(-1===n)continue;const r=t[n];if(r.toMiddleware!==a.toMiddleware||r.relation!==a.relation)throw new Error(`"${se(r.name,r.aliases)}" middleware ${r.relation} "${r.toMiddleware}" middleware cannot be overridden by "${se(s,i)}" middleware ${a.relation} "${a.toMiddleware}" middleware.`);t.splice(n,1)}}for(const e of c)r.add(e)}t.push(a)},clone:()=>s(oe()),use:e=>{e.applyToStack(a)},remove:n=>"string"==typeof n?(n=>{let s=!1;const o=e=>{const t=re(e.name,e.aliases);if(t.includes(n)){s=!0;for(const e of t)r.delete(e);return!1}return!0};return e=e.filter(o),t=t.filter(o),s})(n):(n=>{let s=!1;const o=e=>{if(e.middleware===n){s=!0;for(const t of re(e.name,e.aliases))r.delete(t);return!1}return!0};return e=e.filter(o),t=t.filter(o),s})(n),removeByTag:n=>{let s=!1;const o=e=>{const{tags:t,name:o,aliases:i}=e;if(t&&t.includes(n)){const e=re(o,i);for(const t of e)r.delete(t);return s=!0,!1}return!0};return e=e.filter(o),t=t.filter(o),s},concat:e=>{const t=s(oe());return t.use(e),t.identifyOnResolve(n||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:s,identify:()=>i(!0).map((e=>{const t=e.step??e.relation+" "+e.toMiddleware;return se(e.name,e.aliases)+" - "+t})),identifyOnResolve:e=>("boolean"==typeof e&&(n=e),n),resolve:(e,t)=>{for(const n of i().map((e=>e.middleware)).reverse())e=n(e,t);return n&&console.log(a.identify()),e}};return a},ie={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ae={high:3,normal:2,low:1};class ce{constructor(e){this.middlewareStack=oe(),this.config=e}send(e,t,n){const r="function"!=typeof t?t:void 0,s="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!s)return o(e).then((e=>e.output));o(e).then((e=>s(null,e.output)),(e=>s(e))).catch((()=>{}))}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}var le=n(4300);const ue=(e,t=0,n=e.byteLength-t)=>{if(r=e,!("function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);var r;return le.Buffer.from(e,t,n)},de=(e,t)=>{if("string"!=typeof e)throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?le.Buffer.from(e,t):le.Buffer.from(e)},he=/^[A-Za-z0-9+/]*={0,2}$/,pe=e=>{if(3*e.length%4!=0)throw new TypeError("Incorrect padding on base64 string.");if(!he.exec(e))throw new TypeError("Invalid base64 string.");const t=de(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},fe=e=>{const t=de(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},me=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return ue(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},ye=e=>{let t;if(t="string"==typeof e?fe(e):e,"object"!=typeof t||"number"!=typeof t.byteOffset||"number"!=typeof t.byteLength)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return ue(t.buffer,t.byteOffset,t.byteLength).toString("base64")};class ge extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return transformFromString(e,t);throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,ge.prototype),e}transformToString(e="utf-8"){return transformToString(this,e)}}var we=n(2781);const Se=e=>encodeURIComponent(e).replace(/[!'()*]/g,be),be=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var Ee=n(3685),ve=n(5687);const Ae=["ECONNRESET","EPIPE","ETIMEDOUT"],Re=e=>{const t={};for(const n of Object.keys(e)){const r=e[n];t[n]=Array.isArray(r)?r.join(","):r}return t};class Te{static create(e){return"function"==typeof e?.handle?e:new Te(e)}static checkSocketUsage(e,t,n=console){const{sockets:r,requests:s,maxSockets:o}=e;if("number"!=typeof o||o===1/0)return t;if(Date.now()-15e3<t)return t;if(r&&s)for(const e in r){const t=r[e]?.length??0,i=s[e]?.length??0;if(t>=o&&i>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${i} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise(((t,n)=>{"function"==typeof e?e().then((e=>{t(this.resolveDefaultConfig(e))})).catch(n):t(this.resolveDefaultConfig(e))}))}resolveDefaultConfig(e){const{requestTimeout:t,connectionTimeout:n,socketTimeout:r,httpAgent:s,httpsAgent:o}=e||{};return{connectionTimeout:n,requestTimeout:t??r,httpAgent:s instanceof Ee.Agent||"function"==typeof s?.destroy?s:new Ee.Agent({keepAlive:!0,maxSockets:50,...s}),httpsAgent:o instanceof ve.Agent||"function"==typeof o?.destroy?o:new ve.Agent({keepAlive:!0,maxSockets:50,...o}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:t}={}){let n;return this.config||(this.config=await this.configProvider),new Promise(((r,s)=>{let o;const i=async e=>{await o,clearTimeout(n),s(e)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",void i(e)}const a="https:"===e.protocol,c=a?this.config.httpsAgent:this.config.httpAgent;n=setTimeout((()=>{this.socketWarningTimestamp=Te.checkSocketUsage(c,this.socketWarningTimestamp,this.config.logger)}),this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3));const l=function(e){const t=[];for(let n of Object.keys(e).sort()){const r=e[n];if(n=Se(n),Array.isArray(r))for(let e=0,s=r.length;e<s;e++)t.push(`${n}=${Se(r[e])}`);else{let e=n;(r||"string"==typeof r)&&(e+=`=${Se(r)}`),t.push(e)}}return t.join("&")}(e.query||{});let u;null==e.username&&null==e.password||(u=`${e.username??""}:${e.password??""}`);let d=e.path;l&&(d+=`?${l}`),e.fragment&&(d+=`#${e.fragment}`);const h={headers:e.headers,host:e.hostname,method:e.method,path:d,port:e.port,agent:c,auth:u},p=(a?ve.request:Ee.request)(h,(e=>{(async e=>{await o,clearTimeout(n),r(e)})({response:new L({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:Re(e.headers),body:e})})}));if(p.on("error",(e=>{Ae.includes(e.code)?i(Object.assign(e,{name:"TimeoutError"})):i(e)})),((e,t,n=0)=>{if(!n)return;const r=setTimeout((()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${n} ms`),{name:"TimeoutError"}))}),n);e.on("socket",(e=>{e.connecting?e.on("connect",(()=>{clearTimeout(r)})):clearTimeout(r)}))})(p,i,this.config.connectionTimeout),((e,t,n=0)=>{e.setTimeout(n,(()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${n} ms`),{name:"TimeoutError"}))}))})(p,i,this.config.requestTimeout),t){const e=()=>{p.destroy();const e=new Error("Request aborted");e.name="AbortError",i(e)};if("function"==typeof t.addEventListener){const n=t;n.addEventListener("abort",e,{once:!0}),p.once("close",(()=>n.removeEventListener("abort",e)))}else t.onabort=e}const f=h.agent;"object"==typeof f&&"keepAlive"in f&&((e,{keepAlive:t,keepAliveMsecs:n})=>{!0===t&&e.on("socket",(e=>{e.setKeepAlive(t,n||0)}))})(p,{keepAlive:f.keepAlive,keepAliveMsecs:f.keepAliveMsecs}),o=async function(e,t,n=1e3){const r=t.headers??{},s=r.Expect||r.expect;let o=-1,i=!1;"100-continue"===s&&await Promise.race([new Promise((e=>{o=Number(setTimeout(e,Math.max(1e3,n)))})),new Promise((t=>{e.on("continue",(()=>{clearTimeout(o),t()})),e.on("error",(()=>{i=!0,clearTimeout(o),t()}))}))]),i||function(e,t){if(t instanceof we.Readable)t.pipe(e);else{if(t){if(Buffer.isBuffer(t)||"string"==typeof t)return void e.end(t);const n=t;return"object"==typeof n&&n.buffer&&"number"==typeof n.byteOffset&&"number"==typeof n.byteLength?void e.end(Buffer.from(n.buffer,n.byteOffset,n.byteLength)):void e.end(Buffer.from(t))}e.end()}}(e,t.body)}(p,e,this.config.requestTimeout).catch((e=>(clearTimeout(n),s(e))))}))}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then((n=>({...n,[e]:t})))}httpHandlerConfigs(){return this.config??{}}}n(5158);class Ce{constructor(e){this.sessions=[],this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter((t=>t!==e))}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(const t of this.sessions)t===e&&(t.destroyed||t.destroy())}}class Ie extends we.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,t,n){this.bufferedBytes.push(e),n()}}const Pe=e=>$e(e)?async function(e){const t=[],n=e.getReader();let r=!1,s=0;for(;!r;){const{done:e,value:o}=await n.read();o&&(t.push(o),s+=o.length),r=e}const o=new Uint8Array(s);let i=0;for(const e of t)o.set(e,i),i+=e.length;return o}(e):new Promise(((t,n)=>{const r=new Ie;e.pipe(r),e.on("error",(e=>{r.end(),n(e)})),r.on("error",n),r.on("finish",(function(){const e=new Uint8Array(Buffer.concat(this.bufferedBytes));t(e)}))})),$e=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream;n(3837);const xe={},ke={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),xe[e]=t,ke[t]=e}class Oe{constructor(){this.middlewareStack=oe()}static classBuilder(){return new Me}resolveMiddlewareWithContext(e,t,n,{middlewareFn:r,clientName:s,commandName:o,inputFilterSensitiveLog:i,outputFilterSensitiveLog:a,smithyContext:c,additionalContext:l,CommandCtor:u}){for(const s of r.bind(this)(u,e,t,n))this.middlewareStack.use(s);const h=e.concat(this.middlewareStack),{logger:p}=t,f={logger:p,clientName:s,commandName:o,inputFilterSensitiveLog:i,outputFilterSensitiveLog:a,[d.zK]:{commandInstance:this,...c},...l},{requestHandler:m}=t;return h.resolve((e=>m.handle(e.request,n||{})),f)}}class Me{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,n={}){return this._smithyContext={service:e,operation:t,...n},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=(e=>e),t=(e=>e)){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){const e=this;let t;return t=class extends Oe{static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=t??{},e._init(this)}resolveMiddleware(n,r,s){return this.resolveMiddlewareWithContext(n,r,s,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const Ne="***SensitiveInformation***",De=Math.ceil(2**127*(2-2**-23)),Le=(e,t)=>{const n=(e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}})(e);if(void 0!==n&&_e(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},_e=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},je=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return We.warn(Ue(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Fe=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,qe=e=>{const t=e.match(Fe);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},ze=e=>(e=>Le(e,32))("string"==typeof e?qe(e):e),Ue=e=>String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((e=>!e.includes("stackTraceWarning"))).join("\n"),We={warn:console.warn},He=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Be=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Ge=[31,28,31,30,31,30,31,31,30,31,30,31],Ve=(e,t,n)=>{let r=Ge[t];if(1===t&&Ke(e)&&(r=29),n>r)throw new TypeError(`Invalid day for ${He[t]} in ${e}: ${n}`)},Ke=e=>e%4==0&&(e%100!=0||e%400==0),Je=(e,t,n,r)=>{const s=(e=>(e=>Le(e,8))("string"==typeof e?qe(e):e))(Ye(e));if(s<n||s>r)throw new TypeError(`${t} must be between ${n} and ${r}, inclusive`);return s},Ze=e=>null==e?0:1e3*(e=>(e=>{const t=(e=>{if(null!=e){if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&We.warn(Ue(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}})(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>De)throw new TypeError(`Expected 32-bit float, got ${e}`);return t})("string"==typeof e?qe(e):e))("0."+e),Ye=e=>{let t=0;for(;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)};class Xe extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Xe.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}const Qe=(e,t={})=>{Object.entries(t).filter((([,e])=>void 0!==e)).forEach((([t,n])=>{null!=e[t]&&""!==e[t]||(e[t]=n)}));const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},et=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};let tt=!1;const nt=e=>{const t=[];for(const n in d.f3){const r=d.f3[n];void 0!==e[r]&&t.push({algorithmId:()=>r,checksumConstructor:()=>e[r]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(e){this._checksumAlgorithms.push(e)},checksumAlgorithms(){return this._checksumAlgorithms}}},rt=e=>{const t={};return e.checksumAlgorithms().forEach((e=>{t[e.algorithmId()]=e.checksumConstructor()})),t},st=e=>{let t=e.retryStrategy;return{setRetryStrategy(e){t=e},retryStrategy:()=>t}},ot=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},it=e=>({...nt(e),...st(e)});function at(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}const ct=function(){const e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,[null,...arguments]));return Object.setPrototypeOf(t,e.prototype),t};ct.prototype=Object.create(String.prototype,{constructor:{value:ct,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ct,String);var lt=n(6113),ut=n.n(lt);const dt={randomUUID:ut().randomUUID},ht=new Uint8Array(256);let pt=ht.length;function ft(){return pt>ht.length-16&&(ut().randomFillSync(ht),pt=0),ht.slice(pt,pt+=16)}const mt=[];for(let e=0;e<256;++e)mt.push((e+256).toString(16).slice(1));const yt=function(e,t,n){if(dt.randomUUID&&!t&&!e)return dt.randomUUID();const r=(e=e||{}).random||(e.rng||ft)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return mt[e[t+0]]+mt[e[t+1]]+mt[e[t+2]]+mt[e[t+3]]+"-"+mt[e[t+4]]+mt[e[t+5]]+"-"+mt[e[t+6]]+mt[e[t+7]]+"-"+mt[e[t+8]]+mt[e[t+9]]+"-"+mt[e[t+10]]+mt[e[t+11]]+mt[e[t+12]]+mt[e[t+13]]+mt[e[t+14]]+mt[e[t+15]]}(r)},gt=e=>e?.body instanceof we.Readable||"undefined"!=typeof ReadableStream&&e?.body instanceof ReadableStream,wt=e=>{const t={error:e,errorType:St(e)},n=Et(e.$response);return n&&(t.retryAfterHint=n),t},St=e=>G(e)?"THROTTLING":V(e)?"TRANSIENT":(e=>{if(void 0!==e.$metadata?.httpStatusCode){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!V(e)}return!1})(e)?"SERVER_ERROR":"CLIENT_ERROR",bt={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Et=e=>{if(!L.isInstance(e))return;const t=Object.keys(e.headers).find((e=>"retry-after"===e.toLowerCase()));if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(1e3*r)},vt={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:bt.name};class At{constructor(e){this.authSchemes=new Map;for(const[t,n]of Object.entries(e))void 0!==n&&this.authSchemes.set(t,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}class Rt{async sign(e,t,n){return e}}const Tt="content-length",Ct={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};var It=n(1023);const Pt=async(e,t,n)=>({operation:h(t).operation,region:await p(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),$t=e=>{const t=[];switch(e.operation){case"AssumeRoleWithSAML":case"AssumeRoleWithWebIdentity":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e))}return t},xt={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var kt=n(9798),Ot=n(396),Mt=n(6860),Nt=n(3405);class Dt{constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){var n;this.hash.update("string"==typeof(n=Lt(e,t))?fe(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,lt.createHmac)(this.algorithmIdentifier,Lt(this.secret)):(0,lt.createHash)(this.algorithmIdentifier)}}function Lt(e,t){return le.Buffer.isBuffer(e)?e:"string"==typeof e?de(e,t):ArrayBuffer.isView(e)?ue(e.buffer,e.byteOffset,e.byteLength):ue(e)}var _t=n(7147);const jt=e=>{if(!e)return 0;if("string"==typeof e)return Buffer.byteLength(e);if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;if("number"==typeof e.start&&"number"==typeof e.end)return e.end+1-e.start;if("string"==typeof e.path||Buffer.isBuffer(e.path))return(0,_t.lstatSync)(e.path).size;if("number"==typeof e.fd)return(0,_t.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Ft=n(783);const qt={},zt="endpoints";function Ut(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${Ut(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Ut).join(", ")})`:JSON.stringify(e,null,2)}class Wt extends Error{constructor(e){super(e),this.name="EndpointError"}}const Ht=(e,t)=>(e=>{const t=e.split("."),n=[];for(const r of t){const t=r.indexOf("[");if(-1!==t){if(r.indexOf("]")!==r.length-1)throw new Wt(`Path: '${e}' does not end with ']'`);const s=r.slice(t+1,-1);if(Number.isNaN(parseInt(s)))throw new Wt(`Invalid array index: '${s}' in path: '${e}'`);0!==t&&n.push(r.slice(0,t)),n.push(s)}else n.push(r)}return n})(t).reduce(((n,r)=>{if("object"!=typeof n)throw new Wt(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]}),e),Bt=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Gt=(e,t=!1)=>{if(!t)return Bt.test(e);const n=e.split(".");for(const e of n)if(!Gt(e))return!1;return!0},Vt=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Kt={[d.cj.HTTP]:80,[d.cj.HTTPS]:443},Jt={booleanEquals:(e,t)=>e===t,getAttr:Ht,isSet:e=>null!=e,isValidHostLabel:Gt,not:e=>!e,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){const{hostname:t,port:n,protocol:r="",path:s="",query:o={}}=e,i=new URL(`${r}//${t}${n?`:${n}`:""}${s}`);return i.search=Object.entries(o).map((([e,t])=>`${e}=${t}`)).join("&"),i}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:r,hostname:s,pathname:o,protocol:i,search:a}=t;if(a)return null;const c=i.slice(0,-1);if(!Object.values(d.cj).includes(c))return null;const l=(e=>Vt.test(e)||e.startsWith("[")&&e.endsWith("]"))(s);return{scheme:c,authority:`${r}${n.includes(`${r}:${Kt[c]}`)||"string"==typeof e&&e.includes(`${r}:${Kt[c]}`)?`:${Kt[c]}`:""}`,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}},stringEquals:(e,t)=>e===t,substring:(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},Zt=(e,t)=>{const n=[],r={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const t=e.indexOf("{",s);if(-1===t){n.push(e.slice(s));break}n.push(e.slice(s,t));const o=e.indexOf("}",t);if(-1===o){n.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[o+1]&&(n.push(e.slice(t+1,o)),s=o+2);const i=e.substring(t+1,o);if(i.includes("#")){const[e,t]=i.split("#");n.push(Ht(r[e],t))}else n.push(r[i]);s=o+1}return n.join("")},Yt=(e,t,n)=>{if("string"==typeof e)return Zt(e,n);if(e.fn)return Xt(e,n);if(e.ref)return(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord}[e]))(e,n);throw new Wt(`'${t}': ${String(e)} is not a string, function or reference.`)},Xt=({fn:e,argv:t},n)=>{const r=t.map((e=>["boolean","number"].includes(typeof e)?e:Yt(e,"arg",n))),s=e.split(".");return s[0]in qt&&null!=s[1]?qt[s[0]][s[1]](...r):Jt[e](...r)},Qt=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new Wt(`'${e}' is already defined in Reference Record.`);const r=Xt(t,n);return n.logger?.debug?.(`${zt} evaluateCondition: ${Ut(t)} = ${Ut(r)}`),{result:""===r||!!r,...null!=e&&{toAssign:{name:e,value:r}}}},en=(e=[],t)=>{const n={};for(const r of e){const{result:e,toAssign:s}=Qt(r,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};s&&(n[s.name]=s.value,t.logger?.debug?.(`${zt} assign: ${s.name} := ${Ut(s.value)}`))}return{result:!0,referenceRecord:n}},tn=(e,t)=>Object.entries(e).reduce(((e,[n,r])=>({...e,[n]:r.map((e=>{const r=Yt(e,"Header value entry",t);if("string"!=typeof r)throw new Wt(`Header '${n}' value '${r}' is not a string`);return r}))})),{}),nn=(e,t)=>{if(Array.isArray(e))return e.map((e=>nn(e,t)));switch(typeof e){case"string":return Zt(e,t);case"object":if(null===e)throw new Wt(`Unexpected endpoint property: ${e}`);return rn(e,t);case"boolean":return e;default:throw new Wt("Unexpected endpoint property type: "+typeof e)}},rn=(e,t)=>Object.entries(e).reduce(((e,[n,r])=>({...e,[n]:nn(r,t)})),{}),sn=(e,t)=>{const n=Yt(e,"Endpoint URL",t);if("string"==typeof n)try{return new URL(n)}catch(e){throw console.error(`Failed to construct URL with ${n}`,e),e}throw new Wt("Endpoint URL must be a string, got "+typeof n)},on=(e,t)=>{const{conditions:n,endpoint:r}=e,{result:s,referenceRecord:o}=en(n,t);if(!s)return;const i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:l}=r;return t.logger?.debug?.(`${zt} Resolving endpoint from template: ${Ut(r)}`),{...null!=l&&{headers:tn(l,i)},...null!=c&&{properties:rn(c,i)},url:sn(a,i)}},an=(e,t)=>{const{conditions:n,error:r}=e,{result:s,referenceRecord:o}=en(n,t);if(s)throw new Wt(Yt(r,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},cn=(e,t)=>{const{conditions:n,rules:r}=e,{result:s,referenceRecord:o}=en(n,t);if(s)return ln(r,{...t,referenceRecord:{...t.referenceRecord,...o}})},ln=(e,t)=>{for(const n of e)if("endpoint"===n.type){const e=on(n,t);if(e)return e}else if("error"===n.type)an(n,t);else{if("tree"!==n.type)throw new Wt(`Unknown endpoint rule: ${n}`);{const e=cn(n,t);if(e)return e}}throw new Wt("Rules evaluation failed")},un="required",dn="type",hn="fn",pn="argv",fn="ref",mn=!0,yn="booleanEquals",gn="stringEquals",wn="sigv4",Sn="us-east-1",bn="endpoint",En="https://sts.{Region}.{PartitionResult#dnsSuffix}",vn="tree",An="error",Rn="getAttr",Tn={[un]:!1,[dn]:"String"},Cn={[un]:!0,default:!1,[dn]:"Boolean"},In={[fn]:"Endpoint"},Pn={[hn]:"isSet",[pn]:[{[fn]:"Region"}]},$n={[fn]:"Region"},xn={[hn]:"aws.partition",[pn]:[$n],assign:"PartitionResult"},kn={[fn]:"UseFIPS"},On={[fn]:"UseDualStack"},Mn={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:wn,signingName:"sts",signingRegion:Sn}]},headers:{}},Nn={},Dn={conditions:[{[hn]:gn,[pn]:[$n,"aws-global"]}],[bn]:Mn,[dn]:bn},Ln={[hn]:yn,[pn]:[kn,!0]},_n={[hn]:yn,[pn]:[On,!0]},jn={[hn]:Rn,[pn]:[{[fn]:"PartitionResult"},"supportsFIPS"]},Fn={[fn]:"PartitionResult"},qn={[hn]:yn,[pn]:[!0,{[hn]:Rn,[pn]:[Fn,"supportsDualStack"]}]},zn=[{[hn]:"isSet",[pn]:[In]}],Un=[Ln],Wn=[_n],Hn={version:"1.0",parameters:{Region:Tn,UseDualStack:Cn,UseFIPS:Cn,Endpoint:Tn,UseGlobalEndpoint:Cn},rules:[{conditions:[{[hn]:yn,[pn]:[{[fn]:"UseGlobalEndpoint"},mn]},{[hn]:"not",[pn]:zn},Pn,xn,{[hn]:yn,[pn]:[kn,!1]},{[hn]:yn,[pn]:[On,!1]}],rules:[{conditions:[{[hn]:gn,[pn]:[$n,"ap-northeast-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"ap-south-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"ap-southeast-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"ap-southeast-2"]}],endpoint:Mn,[dn]:bn},Dn,{conditions:[{[hn]:gn,[pn]:[$n,"ca-central-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"eu-central-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"eu-north-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"eu-west-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"eu-west-2"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"eu-west-3"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"sa-east-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,Sn]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"us-east-2"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"us-west-1"]}],endpoint:Mn,[dn]:bn},{conditions:[{[hn]:gn,[pn]:[$n,"us-west-2"]}],endpoint:Mn,[dn]:bn},{endpoint:{url:En,properties:{authSchemes:[{name:wn,signingName:"sts",signingRegion:"{Region}"}]},headers:Nn},[dn]:bn}],[dn]:vn},{conditions:zn,rules:[{conditions:Un,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[dn]:An},{conditions:Wn,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[dn]:An},{endpoint:{url:In,properties:Nn,headers:Nn},[dn]:bn}],[dn]:vn},{conditions:[Pn],rules:[{conditions:[xn],rules:[{conditions:[Ln,_n],rules:[{conditions:[{[hn]:yn,[pn]:[mn,jn]},qn],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Nn,headers:Nn},[dn]:bn}],[dn]:vn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[dn]:An}],[dn]:vn},{conditions:Un,rules:[{conditions:[{[hn]:yn,[pn]:[jn,mn]}],rules:[{conditions:[{[hn]:gn,[pn]:[{[hn]:Rn,[pn]:[Fn,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Nn,headers:Nn},[dn]:bn},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Nn,headers:Nn},[dn]:bn}],[dn]:vn},{error:"FIPS is enabled but this partition does not support FIPS",[dn]:An}],[dn]:vn},{conditions:Wn,rules:[{conditions:[qn],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Nn,headers:Nn},[dn]:bn}],[dn]:vn},{error:"DualStack is enabled but this partition does not support DualStack",[dn]:An}],[dn]:vn},Dn,{endpoint:{url:En,properties:Nn,headers:Nn},[dn]:bn}],[dn]:vn}],[dn]:vn},{error:"Invalid Configuration: Missing Region",[dn]:An}]},Bn=(e,t={})=>((e,t)=>{const{endpointParams:n,logger:r}=t,{parameters:s,rules:o}=e;t.logger?.debug?.(`${zt} Initial EndpointParams: ${Ut(n)}`);const i=Object.entries(s).filter((([,e])=>null!=e.default)).map((([e,t])=>[e,t.default]));if(i.length>0)for(const[e,t]of i)n[e]=n[e]??t;const a=Object.entries(s).filter((([,e])=>e.required)).map((([e])=>e));for(const e of a)if(null==n[e])throw new Wt(`Missing required parameter: '${e}'`);const c=ln(o,{endpointParams:n,logger:r,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{const e=new URL(t.endpointParams.Endpoint),{protocol:n,port:r}=e;c.url.protocol=n,c.url.port=r}catch(e){}return t.logger?.debug?.(`${zt} Resolved endpoint: ${Ut(c)}`),c})(Hn,{endpointParams:e,logger:t.logger});qt.aws=Ft.Iu;var Gn=n(3054);const Vn="AWS_REGION",Kn="AWS_DEFAULT_REGION",Jn=["in-region","cross-region","mobile","standard","legacy"],Zn={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:"legacy"},Yn=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[Vn]||process.env[Kn]))return process.env[Vn]??process.env[Kn];if(!process.env.AWS_EC2_METADATA_DISABLED)try{const{getInstanceMetadataEndpoint:e,httpRequest:t}=await n.e(7861).then(n.bind(n,7861)),r=await e();return(await t({...r,path:"/latest/meta-data/placement/region"})).toString()}catch(e){}};var Xn=n(2047);const Qn=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){const n=t.findIndex((t=>t.schemeId===e.schemeId));-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){r=e},credentials:()=>r}},er=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});class tr extends ce{constructor(...[e]){const t=(n=(e=>{var t;(t=process.version)&&!tt&&parseInt(t.substring(1,t.indexOf(".")))<16&&(tt=!0);const n=(({region:e=(0,v.M)(f),defaultsMode:t=(0,v.M)(Zn)}={})=>(0,Gn.HP)((async()=>{const n="function"==typeof t?await t():t;switch(n?.toLowerCase()){case"auto":return(async e=>{if(e){const t="function"==typeof e?await e():e,n=await Yn();return n?t===n?"in-region":"cross-region":"standard"}return"standard"})(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Jn.join(", ")}, got ${n}`)}})))(e),r=()=>n().then(et),s=(e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??pe,base64Encoder:e?.base64Encoder??ye,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Bn,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??$t,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Ot.VR},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Rt}],logger:e?.logger??new ne,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??C.e,utf8Decoder:e?.utf8Decoder??fe,utf8Encoder:e?.utf8Encoder??me}))(e);return(0,kt.H)(process.version),{...s,...e,runtime:"node",defaultsMode:n,bodyLengthChecker:e?.bodyLengthChecker??jt,credentialDefaultProvider:e?.credentialDefaultProvider??Mt.iw,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Nt.fV)({serviceId:s.serviceId,clientVersion:"3.629.0"}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4")||(async e=>await(0,Mt.iw)(e?.__config||{})()),signer:new Ot.VR},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Rt}],maxAttempts:e?.maxAttempts??(0,v.M)(ee),region:e?.region??(0,v.M)(f,m),requestHandler:Te.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,v.M)({...te,default:async()=>(await r()).retryMode||z}),sha256:e?.sha256??Dt.bind(null,"sha256"),streamCollector:e?.streamCollector??Pe,useDualstackEndpoint:e?.useDualstackEndpoint??(0,v.M)(l),useFipsEndpoint:e?.useFipsEndpoint??(0,v.M)(u)}})(e||{}),{...n,useDualstackEndpoint:n.useDualstackEndpoint??!1,useFipsEndpoint:n.useFipsEndpoint??!1,useGlobalEndpoint:n.useGlobalEndpoint??!1,defaultSigningName:"sts"});var n;const a=(e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if("string"==typeof t)return g(t);const e=await t();return g(e)},useFipsEndpoint:async()=>{const e="string"==typeof t?t:await t();return!!y(e)||("function"!=typeof n?Promise.resolve(!!n):n())}}})((e=>{const{retryStrategy:t}=e,n=p(e.maxAttempts??3);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await p(e.retryMode)()===F.ADAPTIVE?new Y(n):new Z(n))}})((0,i.er)(t))),c=((e,t)=>{const n={...(0,Xn.GW)(e),...it(e),...N(e),...Qn(e)};return t.forEach((e=>e.configure(n))),{...e,...(0,Xn.A1)(n),...(s=n,{...rt(s),...ot(s)}),...(r=n,{httpHandler:r.httpHandler()}),...er(n)};var r,s})((e=>{const t=(n=e,{...n,stsClientCtor:tr});var n;return{...(0,It.K)(t)}})((e=>{const t=e.tls??!0,{endpoint:n}=e,r=null!=n?async()=>I(await p(n)()):void 0,s=!!n;return{...e,endpoint:r,tls:t,isCustomEndpoint:s,useDualstackEndpoint:p(e.useDualstackEndpoint??!1),useFipsEndpoint:p(e.useFipsEndpoint??!1)}})((0,r.S8)(a))),e?.extensions||[]);super(c),this.config=c,this.middlewareStack.use((0,i.XJ)(this.config)),this.middlewareStack.use((e=>({applyToStack:t=>{t.add((e=>(t,n)=>async r=>{let s=await e.retryStrategy();const o=await e.maxAttempts();if(!(e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess)(s))return s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,r);{let e=await s.acquireInitialRetryToken(n.partition_id),a=new Error,c=0,l=0;const{request:u}=r,d=D.isInstance(u);for(d&&(u.headers["amz-sdk-invocation-id"]=yt());;)try{d&&(u.headers["amz-sdk-request"]=`attempt=${c+1}; max=${o}`);const{response:n,output:i}=await t(r);return s.recordSuccess(e),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=l,{response:n,output:i}}catch(t){const r=wt(t);if(a=(i=t)instanceof Error?i:i instanceof Object?Object.assign(new Error,i):"string"==typeof i?new Error(i):new Error(`AWS SDK error wrapper for ${i}`),d&&gt(u))throw(n.logger instanceof ne?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{e=await s.refreshRetryTokenForRetry(e,r)}catch(e){throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=l,a}c=e.getRetryCount();const o=e.getRetryDelay();l+=o,await new Promise((e=>setTimeout(e,o)))}}var i})(e),bt)}}))(this.config)),this.middlewareStack.use((e=>({applyToStack:t=>{var n;t.add((n=e.bodyLengthChecker,e=>async t=>{const r=t.request;if(D.isInstance(r)){const{body:e,headers:t}=r;if(e&&-1===Object.keys(t).map((e=>e.toLowerCase())).indexOf(Tt))try{const t=n(e);r.headers={...r.headers,[Tt]:String(t)}}catch(e){}}return e({...t,request:r})}),Ct)}}))(this.config)),this.middlewareStack.use((0,r.G2)(this.config)),this.middlewareStack.use((0,s.cV)(this.config)),this.middlewareStack.use((0,o.eV)(this.config)),this.middlewareStack.use(((e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(((e,t)=>(n,r)=>async s=>{const o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,r,s.input)),i=function(e){const t=new Map;for(const n of e)t.set(n.schemeId,n);return t}(e.httpAuthSchemes),a=h(r),c=[];for(const n of o){const s=i.get(n.schemeId);if(!s){c.push(`HttpAuthScheme \`${n.schemeId}\` was not enabled for this service.`);continue}const o=s.identityProvider(await t.identityProviderConfigProvider(e));if(!o){c.push(`HttpAuthScheme \`${n.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:l={},signingProperties:u={}}=n.propertiesExtractor?.(e,r)||{};n.identityProperties=Object.assign(n.identityProperties||{},l),n.signingProperties=Object.assign(n.signingProperties||{},u),a.selectedHttpAuthScheme={httpAuthOption:n,identity:await o(n.identityProperties),signer:s.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(c.join("\n"));return n(s)})(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),M)}}))(this.config,{httpAuthSchemeParametersProvider:Pt,identityProviderConfigProvider:async e=>new At({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((this.config,{applyToStack:e=>{e.addRelativeTo(((e,t)=>async n=>{if(!D.isInstance(n.request))return e(n);const r=h(t).selectedHttpAuthScheme;if(!r)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:s={}},identity:o,signer:i}=r,a=await e({...n,request:await i.sign(n.request,o,s)}).catch((i.errorHandler||_)(s));return(i.successHandler||j)(a.response,s),a}),vt)}}))}destroy(){super.destroy()}}class nr extends Xe{constructor(e){super(e),Object.setPrototypeOf(this,nr.prototype)}}class rr extends nr{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,rr.prototype)}}class sr extends nr{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,sr.prototype)}}class or extends nr{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,or.prototype)}}class ir extends nr{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,ir.prototype)}}class ar extends nr{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,ar.prototype)}}class cr extends nr{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,cr.prototype)}}class lr extends nr{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,lr.prototype)}}class ur extends nr{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,ur.prototype)}}const dr=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Ne}}),hr=e=>({...e,...e.Credentials&&{Credentials:dr(e.Credentials)}}),pr=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:Ne}}),fr=e=>({...e,...e.Credentials&&{Credentials:dr(e.Credentials)}}),mr=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Ne}}),yr=e=>({...e,...e.Credentials&&{Credentials:dr(e.Credentials)}}),gr=e=>({...e,...e.Credentials&&{Credentials:dr(e.Credentials)}}),wr=e=>({...e,...e.Credentials&&{Credentials:dr(e.Credentials)}});var Sr=n(1958);const br=async(e,t)=>{const n=Ps;let r;return r=Oo({...Br(e,t),[xs]:Os,[Io]:$s}),Is(t,n,"/",void 0,r)},Er=async(e,t)=>{const n=Ps;let r;return r=Oo({...Gr(e,t),[xs]:Ds,[Io]:$s}),Is(t,n,"/",void 0,r)},vr=async(e,t)=>{const n=Ps;let r;return r=Oo({...Vr(e,t),[xs]:Ls,[Io]:$s}),Is(t,n,"/",void 0,r)},Ar=async(e,t)=>{const n=Ps;let r;return r=Oo({...Kr(e,t),[xs]:Us,[Io]:$s}),Is(t,n,"/",void 0,r)},Rr=async(e,t)=>{const n=Ps;let r;return r=Oo({...Jr(e,t),[xs]:Zs,[Io]:$s}),Is(t,n,"/",void 0,r)},Tr=async(e,t)=>{const n=Ps;let r;return r=Oo({...Zr(e,t),[xs]:Ys,[Io]:$s}),Is(t,n,"/",void 0,r)},Cr=async(e,t)=>{const n=Ps;let r;return r=Oo({...Yr(e,t),[xs]:Xs,[Io]:$s}),Is(t,n,"/",void 0,r)},Ir=async(e,t)=>{const n=Ps;let r;return r=Oo({...Xr(e,t),[xs]:Qs,[Io]:$s}),Is(t,n,"/",void 0,r)},Pr=async(e,t)=>{if(e.statusCode>=300)return Lr(e,t);const n=await(0,Sr.he)(e.body,t);let r={};return r=as(n.AssumeRoleResult,t),{$metadata:Rs(e),...r}},$r=async(e,t)=>{if(e.statusCode>=300)return Lr(e,t);const n=await(0,Sr.he)(e.body,t);let r={};return r=cs(n.AssumeRoleWithSAMLResult,t),{$metadata:Rs(e),...r}},xr=async(e,t)=>{if(e.statusCode>=300)return Lr(e,t);const n=await(0,Sr.he)(e.body,t);let r={};return r=ls(n.AssumeRoleWithWebIdentityResult,t),{$metadata:Rs(e),...r}},kr=async(e,t)=>{if(e.statusCode>=300)return Lr(e,t);const n=await(0,Sr.he)(e.body,t);let r={};return r=ds(n.DecodeAuthorizationMessageResult,t),{$metadata:Rs(e),...r}},Or=async(e,t)=>{if(e.statusCode>=300)return Lr(e,t);const n=await(0,Sr.he)(e.body,t);let r={};return r=ps(n.GetAccessKeyInfoResult,t),{$metadata:Rs(e),...r}},Mr=async(e,t)=>{if(e.statusCode>=300)return Lr(e,t);const n=await(0,Sr.he)(e.body,t);let r={};return r=fs(n.GetCallerIdentityResult,t),{$metadata:Rs(e),...r}},Nr=async(e,t)=>{if(e.statusCode>=300)return Lr(e,t);const n=await(0,Sr.he)(e.body,t);let r={};return r=ms(n.GetFederationTokenResult,t),{$metadata:Rs(e),...r}},Dr=async(e,t)=>{if(e.statusCode>=300)return Lr(e,t);const n=await(0,Sr.he)(e.body,t);let r={};return r=ys(n.GetSessionTokenResult,t),{$metadata:Rs(e),...r}},Lr=async(e,t)=>{const n={...e,body:await(0,Sr.OH)(e.body,t)},r=Mo(e,n.body);switch(r){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await _r(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Ur(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Wr(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Hr(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Fr(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await zr(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await jr(n,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await qr(n,t);default:const s=n.body;return Ts({output:e,parsedBody:s.Error,errorCode:r})}},_r=async(e,t)=>{const n=e.body,r=hs(n.Error,t),s=new rr({$metadata:Rs(e),...r});return Qe(s,n)},jr=async(e,t)=>{const n=e.body,r=gs(n.Error,t),s=new lr({$metadata:Rs(e),...r});return Qe(s,n)},Fr=async(e,t)=>{const n=e.body,r=ws(n.Error,t),s=new ar({$metadata:Rs(e),...r});return Qe(s,n)},qr=async(e,t)=>{const n=e.body,r=Ss(n.Error,t),s=new ur({$metadata:Rs(e),...r});return Qe(s,n)},zr=async(e,t)=>{const n=e.body,r=bs(n.Error,t),s=new cr({$metadata:Rs(e),...r});return Qe(s,n)},Ur=async(e,t)=>{const n=e.body,r=Es(n.Error,t),s=new sr({$metadata:Rs(e),...r});return Qe(s,n)},Wr=async(e,t)=>{const n=e.body,r=vs(n.Error,t),s=new or({$metadata:Rs(e),...r});return Qe(s,n)},Hr=async(e,t)=>{const n=e.body,r=As(n.Error,t),s=new ir({$metadata:Rs(e),...r});return Qe(s,n)},Br=(e,t)=>{const n={};if(null!=e[po]&&(n[po]=e[po]),null!=e[fo]&&(n[fo]=e[fo]),null!=e[oo]){const r=Qr(e[oo],t);0===e[oo]?.length&&(n.PolicyArns=[]),Object.entries(r).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}if(null!=e[so]&&(n[so]=e[so]),null!=e[Hs]&&(n[Hs]=e[Hs]),null!=e[Ao]){const r=os(e[Ao],t);0===e[Ao]?.length&&(n.Tags=[]),Object.entries(r).forEach((([e,t])=>{n[`Tags.${e}`]=t}))}if(null!=e[To]){const r=ss(e[To],t);0===e[To]?.length&&(n.TransitiveTagKeys=[]),Object.entries(r).forEach((([e,t])=>{n[`TransitiveTagKeys.${e}`]=t}))}if(null!=e[Gs]&&(n[Gs]=e[Gs]),null!=e[bo]&&(n[bo]=e[bo]),null!=e[Ro]&&(n[Ro]=e[Ro]),null!=e[So]&&(n[So]=e[So]),null!=e[co]){const r=ns(e[co],t);0===e[co]?.length&&(n.ProvidedContexts=[]),Object.entries(r).forEach((([e,t])=>{n[`ProvidedContexts.${e}`]=t}))}return n},Gr=(e,t)=>{const n={};if(null!=e[po]&&(n[po]=e[po]),null!=e[io]&&(n[io]=e[io]),null!=e[go]&&(n[go]=e[go]),null!=e[oo]){const r=Qr(e[oo],t);0===e[oo]?.length&&(n.PolicyArns=[]),Object.entries(r).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}return null!=e[so]&&(n[so]=e[so]),null!=e[Hs]&&(n[Hs]=e[Hs]),n},Vr=(e,t)=>{const n={};if(null!=e[po]&&(n[po]=e[po]),null!=e[fo]&&(n[fo]=e[fo]),null!=e[$o]&&(n[$o]=e[$o]),null!=e[lo]&&(n[lo]=e[lo]),null!=e[oo]){const r=Qr(e[oo],t);0===e[oo]?.length&&(n.PolicyArns=[]),Object.entries(r).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}return null!=e[so]&&(n[so]=e[so]),null!=e[Hs]&&(n[Hs]=e[Hs]),n},Kr=(e,t)=>{const n={};return null!=e[Vs]&&(n[Vs]=e[Vs]),n},Jr=(e,t)=>{const n={};return null!=e[ks]&&(n[ks]=e[ks]),n},Zr=(e,t)=>({}),Yr=(e,t)=>{const n={};if(null!=e[no]&&(n[no]=e[no]),null!=e[so]&&(n[so]=e[so]),null!=e[oo]){const r=Qr(e[oo],t);0===e[oo]?.length&&(n.PolicyArns=[]),Object.entries(r).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}if(null!=e[Hs]&&(n[Hs]=e[Hs]),null!=e[Ao]){const r=os(e[Ao],t);0===e[Ao]?.length&&(n.Tags=[]),Object.entries(r).forEach((([e,t])=>{n[`Tags.${e}`]=t}))}return n},Xr=(e,t)=>{const n={};return null!=e[Hs]&&(n[Hs]=e[Hs]),null!=e[bo]&&(n[bo]=e[bo]),null!=e[Ro]&&(n[Ro]=e[Ro]),n},Qr=(e,t)=>{const n={};let r=1;for(const s of e){if(null===s)continue;const e=es(s,t);Object.entries(e).forEach((([e,t])=>{n[`member.${r}.${e}`]=t})),r++}return n},es=(e,t)=>{const n={};return null!=e[xo]&&(n[xo]=e[xo]),n},ts=(e,t)=>{const n={};return null!=e[ao]&&(n[ao]=e[ao]),null!=e[zs]&&(n[zs]=e[zs]),n},ns=(e,t)=>{const n={};let r=1;for(const t of e){if(null===t)continue;const e=ts(t);Object.entries(e).forEach((([e,t])=>{n[`member.${r}.${e}`]=t})),r++}return n},rs=(e,t)=>{const n={};return null!=e[to]&&(n[to]=e[to]),null!=e[Po]&&(n[Po]=e[Po]),n},ss=(e,t)=>{const n={};let r=1;for(const t of e)null!==t&&(n[`member.${r}`]=t,r++);return n},os=(e,t)=>{const n={};let r=1;for(const t of e){if(null===t)continue;const e=rs(t);Object.entries(e).forEach((([e,t])=>{n[`member.${r}.${e}`]=t})),r++}return n},is=(e,t)=>{const n={};return null!=e[Ms]&&(n[Ms]=je(e[Ms])),null!=e[js]&&(n[js]=je(e[js])),n},as=(e,t)=>{const n={};return null!=e[qs]&&(n[qs]=us(e[qs],t)),null!=e[Ns]&&(n[Ns]=is(e[Ns])),null!=e[uo]&&(n[uo]=ze(e[uo])),null!=e[So]&&(n[So]=je(e[So])),n},cs=(e,t)=>{const n={};return null!=e[qs]&&(n[qs]=us(e[qs],t)),null!=e[Ns]&&(n[Ns]=is(e[Ns])),null!=e[uo]&&(n[uo]=ze(e[uo])),null!=e[mo]&&(n[mo]=je(e[mo])),null!=e[Eo]&&(n[Eo]=je(e[Eo])),null!=e[eo]&&(n[eo]=je(e[eo])),null!=e[Fs]&&(n[Fs]=je(e[Fs])),null!=e[ro]&&(n[ro]=je(e[ro])),null!=e[So]&&(n[So]=je(e[So])),n},ls=(e,t)=>{const n={};return null!=e[qs]&&(n[qs]=us(e[qs],t)),null!=e[wo]&&(n[wo]=je(e[wo])),null!=e[Ns]&&(n[Ns]=is(e[Ns])),null!=e[uo]&&(n[uo]=ze(e[uo])),null!=e[ho]&&(n[ho]=je(e[ho])),null!=e[Fs]&&(n[Fs]=je(e[Fs])),null!=e[So]&&(n[So]=je(e[So])),n},us=(e,t)=>{const n={};return null!=e[ks]&&(n[ks]=je(e[ks])),null!=e[yo]&&(n[yo]=je(e[yo])),null!=e[vo]&&(n[vo]=je(e[vo])),null!=e[Bs]&&(n[Bs]=((e,t)=>{if(null==e)throw new TypeError("Expected a non-null value");return e})((e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=Be.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,a,c,l,u]=t,d=(e=>(e=>Le(e,16))("string"==typeof e?qe(e):e))(Ye(r)),h=((e,t,n,r)=>{const s=t-1;return Ve(e,s,n),new Date(Date.UTC(e,s,n,Je(r.hours,"hour",0,23),Je(r.minutes,"minute",0,59),Je(r.seconds,"seconds",0,60),Ze(r.fractionalMilliseconds)))})(d,Je(s,"month",1,12),Je(o,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l});return"Z"!=u.toUpperCase()&&h.setTime(h.getTime()-(e=>{const t=e[0];let n=1;if("+"==t)n=1;else{if("-"!=t)throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);n=-1}return n*(60*Number(e.substring(1,3))+Number(e.substring(4,6)))*60*1e3})(u)),h})(e[Bs]))),n},ds=(e,t)=>{const n={};return null!=e[Ws]&&(n[Ws]=je(e[Ws])),n},hs=(e,t)=>{const n={};return null!=e[ko]&&(n[ko]=je(e[ko])),n},ps=(e,t)=>{const n={};return null!=e[_s]&&(n[_s]=je(e[_s])),n},fs=(e,t)=>{const n={};return null!=e[Co]&&(n[Co]=je(e[Co])),null!=e[_s]&&(n[_s]=je(e[_s])),null!=e[js]&&(n[js]=je(e[js])),n},ms=(e,t)=>{const n={};return null!=e[qs]&&(n[qs]=us(e[qs],t)),null!=e[Ks]&&(n[Ks]=((e,t)=>{const n={};return null!=e[Js]&&(n[Js]=je(e[Js])),null!=e[js]&&(n[js]=je(e[js])),n})(e[Ks])),null!=e[uo]&&(n[uo]=ze(e[uo])),n},ys=(e,t)=>{const n={};return null!=e[qs]&&(n[qs]=us(e[qs],t)),n},gs=(e,t)=>{const n={};return null!=e[ko]&&(n[ko]=je(e[ko])),n},ws=(e,t)=>{const n={};return null!=e[ko]&&(n[ko]=je(e[ko])),n},Ss=(e,t)=>{const n={};return null!=e[ko]&&(n[ko]=je(e[ko])),n},bs=(e,t)=>{const n={};return null!=e[ko]&&(n[ko]=je(e[ko])),n},Es=(e,t)=>{const n={};return null!=e[ko]&&(n[ko]=je(e[ko])),n},vs=(e,t)=>{const n={};return null!=e[ko]&&(n[ko]=je(e[ko])),n},As=(e,t)=>{const n={};return null!=e[ko]&&(n[ko]=je(e[ko])),n},Rs=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ts=(Cs=nr,({output:e,parsedBody:t,errorCode:n})=>{(({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{const s=(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}))(e),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new n({name:t?.code||t?.Code||r||o||"UnknownError",$fault:"client",$metadata:s});throw Qe(i,t)})({output:e,parsedBody:t,exceptionCtor:Cs,errorCode:n})});var Cs;const Is=async(e,t,n,r,s)=>{const{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),l={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return void 0!==r&&(l.hostname=r),void 0!==s&&(l.body=s),new D(l)},Ps={"content-type":"application/x-www-form-urlencoded"},$s="2011-06-15",xs="Action",ks="AccessKeyId",Os="AssumeRole",Ms="AssumedRoleId",Ns="AssumedRoleUser",Ds="AssumeRoleWithSAML",Ls="AssumeRoleWithWebIdentity",_s="Account",js="Arn",Fs="Audience",qs="Credentials",zs="ContextAssertion",Us="DecodeAuthorizationMessage",Ws="DecodedMessage",Hs="DurationSeconds",Bs="Expiration",Gs="ExternalId",Vs="EncodedMessage",Ks="FederatedUser",Js="FederatedUserId",Zs="GetAccessKeyInfo",Ys="GetCallerIdentity",Xs="GetFederationToken",Qs="GetSessionToken",eo="Issuer",to="Key",no="Name",ro="NameQualifier",so="Policy",oo="PolicyArns",io="PrincipalArn",ao="ProviderArn",co="ProvidedContexts",lo="ProviderId",uo="PackedPolicySize",ho="Provider",po="RoleArn",fo="RoleSessionName",mo="Subject",yo="SecretAccessKey",go="SAMLAssertion",wo="SubjectFromWebIdentityToken",So="SourceIdentity",bo="SerialNumber",Eo="SubjectType",vo="SessionToken",Ao="Tags",Ro="TokenCode",To="TransitiveTagKeys",Co="UserId",Io="Version",Po="Value",$o="WebIdentityToken",xo="arn",ko="message",Oo=e=>Object.entries(e).map((([e,t])=>at(e)+"="+at(t))).join("&"),Mo=(e,t)=>void 0!==t.Error?.Code?t.Error.Code:404==e.statusCode?"NotFound":void 0;class No extends(Oe.classBuilder().ep({...xt}).m((function(e,t,n,r){return[x(n,this.serialize,this.deserialize),O(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,hr).ser(br).de(Pr).build()){}class Do extends(Oe.classBuilder().ep({...xt}).m((function(e,t,n,r){return[x(n,this.serialize,this.deserialize),O(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithSAML",{}).n("STSClient","AssumeRoleWithSAMLCommand").f(pr,fr).ser(Er).de($r).build()){}class Lo extends(Oe.classBuilder().ep({...xt}).m((function(e,t,n,r){return[x(n,this.serialize,this.deserialize),O(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(mr,yr).ser(vr).de(xr).build()){}class _o extends(Oe.classBuilder().ep({...xt}).m((function(e,t,n,r){return[x(n,this.serialize,this.deserialize),O(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","DecodeAuthorizationMessage",{}).n("STSClient","DecodeAuthorizationMessageCommand").f(void 0,void 0).ser(Ar).de(kr).build()){}class jo extends(Oe.classBuilder().ep({...xt}).m((function(e,t,n,r){return[x(n,this.serialize,this.deserialize),O(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","GetAccessKeyInfo",{}).n("STSClient","GetAccessKeyInfoCommand").f(void 0,void 0).ser(Rr).de(Or).build()){}class Fo extends(Oe.classBuilder().ep({...xt}).m((function(e,t,n,r){return[x(n,this.serialize,this.deserialize),O(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").f(void 0,void 0).ser(Tr).de(Mr).build()){}class qo extends(Oe.classBuilder().ep({...xt}).m((function(e,t,n,r){return[x(n,this.serialize,this.deserialize),O(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","GetFederationToken",{}).n("STSClient","GetFederationTokenCommand").f(void 0,gr).ser(Cr).de(Nr).build()){}class zo extends(Oe.classBuilder().ep({...xt}).m((function(e,t,n,r){return[x(n,this.serialize,this.deserialize),O(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","GetSessionToken",{}).n("STSClient","GetSessionTokenCommand").f(void 0,wr).ser(Ir).de(Dr).build()){}const Uo={AssumeRoleCommand:No,AssumeRoleWithSAMLCommand:Do,AssumeRoleWithWebIdentityCommand:Lo,DecodeAuthorizationMessageCommand:_o,GetAccessKeyInfoCommand:jo,GetCallerIdentityCommand:Fo,GetFederationTokenCommand:qo,GetSessionTokenCommand:zo};class Wo extends tr{}((e,t)=>{for(const n of Object.keys(e)){const r=e[n],s=async function(e,t,n){const s=new r(e);if("function"==typeof t)this.send(s,t);else{if("function"!=typeof n)return this.send(s,t);if("object"!=typeof t)throw new Error("Expected http options but got "+typeof t);this.send(s,t||{},n)}},o=(n[0].toLowerCase()+n.slice(1)).replace(/Command$/,"");t.prototype[o]=s}})(Uo,Wo);const Ho="us-east-1",Bo=e=>{if("string"==typeof e?.Arn){const t=e.Arn.split(":");if(t.length>4&&""!==t[4])return t[4]}},Go=async(e,t,n)=>{const r="function"==typeof e?await e():e,s="function"==typeof t?await t():t;return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${r} (provider)`,`${s} (parent client)`,`${Ho} (STS default)`),r??s??Ho},Vo=(e,t)=>t?class extends e{constructor(e){super(e);for(const e of t)this.middlewareStack.use(e)}}:e,Ko=(e={},t)=>((e,t)=>{let n,r;return async(s,o)=>{if(r=s,!n){const{logger:s=e?.parentClientConfig?.logger,region:o,requestHandler:i=e?.parentClientConfig?.requestHandler,credentialProviderLogger:a}=e,c=await Go(o,e?.parentClientConfig?.region,a);n=new t({credentialDefaultProvider:()=>async()=>r,region:c,requestHandler:i,logger:s})}const{Credentials:i,AssumedRoleUser:a}=await n.send(new No(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);const c=Bo(a);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}}}})(e,Vo(tr,t)),Jo=(e={},t)=>((e,t)=>{let n;return async r=>{if(!n){const{logger:r=e?.parentClientConfig?.logger,region:s,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:i}=e,a=await Go(s,e?.parentClientConfig?.region,i);n=new t({region:a,requestHandler:o,logger:r})}const{Credentials:s,AssumedRoleUser:o}=await n.send(new Lo(r));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);const i=Bo(o);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}}}})(e,Vo(tr,t)),Zo=e=>t=>e({roleAssumer:Ko(t),roleAssumerWithWebIdentity:Jo(t),...t})},4310:(e,t,n)=>{n.d(t,{M:()=>i});var r=n(3054);function s(e){try{const t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch(t){return e}}var o=n(8354);const i=({environmentVariableSelector:e,configFileSelector:t,default:n},i={})=>{return(0,r.HP)((0,r.tS)((a=e,async()=>{try{const e=a(process.env);if(void 0===e)throw new Error;return e}catch(e){throw new r.mV(e.message||`Not found in ENV: ${s(a.toString())}`,{logger:void 0})}}),((e,{preferredFile:t="config",...n}={})=>async()=>{const i=(0,o.Jl)(n),{configFile:a,credentialsFile:c}=await(0,o.Zl)(n),l=c[i]||{},u=a[i]||{},d="config"===t?{...l,...u}:{...u,...l};try{const n=e(d,"config"===t?a:c);if(void 0===n)throw new Error;return n}catch(t){throw new r.mV(t.message||`Not found in config files w/ profile [${i}]: ${s(e.toString())}`,{logger:n.logger})}})(t,i),(e=>"function"==typeof e?async()=>await e():(0,r.f$)(e))(n)));var a}},3054:(e,t,n)=>{n.d(t,{mV:()=>s,kb:()=>r,tS:()=>o,f$:()=>i,HP:()=>a});class r extends Error{constructor(e,t=!0){let n,s=!0;"boolean"==typeof t?(n=void 0,s=t):null!=t&&"object"==typeof t&&(n=t.logger,s=t.tryNextLink??!0),super(e),this.name="ProviderError",this.tryNextLink=s,Object.setPrototypeOf(this,r.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}class s extends r{constructor(e,t=!0){super(e,t),this.name="CredentialsProviderError",Object.setPrototypeOf(this,s.prototype)}}const o=(...e)=>async()=>{if(0===e.length)throw new r("No providers in chain");let t;for(const n of e)try{return await n()}catch(e){if(t=e,e?.tryNextLink)continue;throw e}throw t},i=e=>()=>Promise.resolve(e),a=(e,t,n)=>{let r,s,o,i=!1;const a=async()=>{s||(s=e());try{r=await s,o=!0,i=!1}finally{s=void 0}return r};return void 0===t?async e=>(o&&!e?.forceRefresh||(r=await a()),r):async e=>(o&&!e?.forceRefresh||(r=await a()),i?r:n&&!n(r)?(i=!0,r):t(r)?(await a(),r):r)}},8354:(e,t,n)=>{n.d(t,{Ck:()=>E,Jl:()=>a,Zl:()=>v});var r=n(2037),s=n(1017);const o={},i=()=>{const{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:i=`C:${s.sep}`}=process.env;if(e)return e;if(t)return t;if(n)return`${i}${n}`;const a=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return o[a]||(o[a]=(0,r.homedir)()),o[a]},a=e=>e.profile||process.env.AWS_PROFILE||"default";n(6113);var c=n(7147);const{readFile:l}=c.promises;var u=n(4606);const d=e=>Object.entries(e).filter((([e])=>{const t=e.indexOf(E);return-1!==t&&Object.values(u.I).includes(e.substring(0,t))})).reduce(((e,[t,n])=>{const r=t.indexOf(E);return e[t.substring(0,r)===u.I.PROFILE?t.substring(r+1):t]=n,e}),{...e.default&&{default:e.default}}),h=()=>process.env.AWS_CONFIG_FILE||(0,s.join)(i(),".aws","config"),p=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,s.join)(i(),".aws","credentials"),f=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,m=["__proto__","profile __proto__"],y=e=>{const t={};let n,r;for(const s of e.split(/\r?\n/)){const e=s.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){n=void 0,r=void 0;const t=e.substring(1,e.length-1),s=f.exec(t);if(s){const[,e,,t]=s;Object.values(u.I).includes(e)&&(n=[e,t].join(E))}else n=t;if(m.includes(t))throw new Error(`Found invalid profile name "${t}"`)}else if(n){const o=e.indexOf("=");if(![0,-1].includes(o)){const[i,a]=[e.substring(0,o).trim(),e.substring(o+1).trim()];if(""===a)r=i;else{r&&s.trimStart()===s&&(r=void 0),t[n]=t[n]||{};const e=r?[r,i].join(E):i;t[n][e]=a}}}}return t},{readFile:g}=c.promises,w={},S=(e,t)=>(w[e]&&!t?.ignoreCache||(w[e]=g(e,"utf8")),w[e]),b=()=>({}),E=".",v=async(e={})=>{const{filepath:t=p(),configFilepath:n=h()}=e,r=i();let o=t;t.startsWith("~/")&&(o=(0,s.join)(r,t.slice(2)));let a=n;n.startsWith("~/")&&(a=(0,s.join)(r,n.slice(2)));const c=await Promise.all([S(a,{ignoreCache:e.ignoreCache}).then(y).then(d).catch(b),S(o,{ignoreCache:e.ignoreCache}).then(y).catch(b)]);return{configFile:c[0],credentialsFile:c[1]}}},4606:(e,t,n)=>{var r,s,o,i,a;n.d(t,{f3:()=>i,cj:()=>o,I:()=>l,zK:()=>c}),function(e){e.HEADER="header",e.QUERY="query"}(r||(r={})),function(e){e.HEADER="header",e.QUERY="query"}(s||(s={})),function(e){e.HTTP="http",e.HTTPS="https"}(o||(o={})),function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"}(i||(i={})),function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"}(a||(a={}));const c="__smithy_context";var l,u;!function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"}(l||(l={})),function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"}(u||(u={}))},1802:(e,t,n)=>{n.d(t,{e:()=>r});const r=e=>{if("string"==typeof e)return r(new URL(e));const{hostname:t,pathname:n,port:s,protocol:o,search:i}=e;let a;return i&&(a=function(e){const t={};if(e=e.replace(/^\?/,""))for(const n of e.split("&")){let[e,r=null]=n.split("=");e=decodeURIComponent(e),r&&(r=decodeURIComponent(r)),e in t?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:t[e]=r}return t}(i)),{hostname:t,port:s?parseInt(s):void 0,protocol:o,path:n,query:a}}}};